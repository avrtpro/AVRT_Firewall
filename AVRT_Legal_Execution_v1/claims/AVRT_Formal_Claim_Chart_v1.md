# AVRT Formal Claim Chart v1.0

**Document ID:** AVRT-CLM-2025-001
**Version:** 1.0.0
**Patent Reference:** USPTO Application 19/236,935
**Applicant:** Jason I. Proper, BGBH Threads LLC
**Date:** 2025-01-31

---

## 1. Claim Structure Overview

This document maps each patent claim element to its corresponding implementation in the AVRT codebase. All references point to specific modules, classes, methods, and configuration parameters.

---

## 2. Independent Claims

### Claim 1: Middleware Firewall for AI Output Validation

**Claim Language:** A computer-implemented method for validating artificial intelligence generated outputs, comprising: intercepting an output generated by an AI language model in response to a user input; applying a multi-dimensional scoring framework to the output; determining an enforcement action based on the scoring results; and delivering a validated or replaced output to the user.

| Claim Element | Implementation | Source File | Reference |
|---------------|----------------|-------------|-----------|
| Intercepting AI output | `AVRTFirewall.validate()` receives `input` and `output` parameters as the interception point between AI provider and user | `middleware.py` | Lines 517-600 |
| Multi-dimensional scoring framework | SPIEL Framework: Safety, Personalization, Integrity, Ethics, Logic evaluated independently | `middleware.py` | `SPIELAnalyzer.analyze()` Lines 253-287 |
| Determining enforcement action | `SPIELEngine._determine_action()` applies threshold-based decision logic | `spiel_engine.py` | Lines 301-334 |
| Delivering validated or replaced output | `ValidationResult.message` contains original output if safe, or safe alternative if blocked | `middleware.py` | Lines 574, 602-607 |

### Claim 2: Five-Dimensional Ethical Scoring Framework (SPIEL)

**Claim Language:** The method of Claim 1, wherein the multi-dimensional scoring framework comprises five independently evaluated dimensions: Safety, Personalization, Integrity, Ethics, and Logic, each producing a numerical score.

| Dimension | Scoring Method | Implementation | Source |
|-----------|---------------|----------------|--------|
| Safety | Pattern-match against harmful content list; base 100, -15 per match | `SPIELEngine._analyze_safety()` | `spiel_engine.py:230-241` |
| Personalization | Positive-marker matching; base 80, +4 per match | `SPIELEngine._analyze_personalization()` | `spiel_engine.py:243-256` |
| Integrity | Pattern-match against dishonest language; base 95, -15 per match | `SPIELEngine._analyze_integrity()` | `spiel_engine.py:258-269` |
| Ethics | Pattern-match against unethical content; base 100, -20 per match | `SPIELEngine._analyze_ethics()` | `spiel_engine.py:271-282` |
| Logic | Reasoning-marker matching + length check; base 85, +3 per match | `SPIELEngine._analyze_logic()` | `spiel_engine.py:284-299` |

### Claim 3: Truth-Honesty-Transparency (THT) Protocol

**Claim Language:** The method of Claim 1, further comprising a secondary validation protocol that evaluates the output across three pillars: Truth verification, Honesty verification, and Transparency verification, wherein non-compliance results in a warning status.

| Pillar | Evaluation | Failure Trigger | Source |
|--------|-----------|-----------------|--------|
| Truth | Substring match against absolutist/overconfident patterns | Any match in `false_patterns` | `tht_service.py:113-123` |
| Honesty | Substring match against secretive/manipulative patterns | Any match in `dishonest_patterns` | `tht_service.py:125-134` |
| Transparency | For substantive texts with claims, checks for reasoning markers | Claims present without supporting reasoning | `tht_service.py:136-158` |
| Compliance gate | `confidence = verified_count / 3.0; compliant = all_true AND confidence >= 0.8` | Any pillar failure | `tht_service.py:89-98` |

### Claim 4: Fail-Closed Security Architecture

**Claim Language:** The method of Claim 1, wherein on any system error during evaluation, the system defaults to blocking the output rather than permitting unvalidated content to reach the user.

| Element | Implementation | Source |
|---------|----------------|--------|
| Exception handling wraps entire evaluation | `try/except` around all SPIEL analysis | `spiel_engine.py:169-228` |
| Default block on error | Returns `BLOCK` action with all scores at 0.0 | `spiel_engine.py:214-226` |
| Configurable via policy | `fail_closed` boolean in `policy_store.json` | `policy_store.json:8` |
| Default state | `fail_closed: true` | `spiel_engine.py:102` |

### Claim 5: Voice-First Middleware Operation

**Claim Language:** The method of Claim 1, further comprising a voice-first operating mode wherein voice-transcribed user inputs are processed through the validation pipeline with real-time monitoring capabilities.

| Element | Implementation | Source |
|---------|----------------|--------|
| Voice-first mode | `AVRTMode.VOICE_FIRST` enum value; `VoiceFirewall` subclass | `middleware.py:59-64, 663-720` |
| Voice monitoring | `VoiceFirewall.start_monitoring()` / `stop_monitoring()` | `middleware.py:677-685` |
| Voice language configuration | `AVRTConfig.voice_language` parameter | `middleware.py:204` |
| iOS voice capture | `VoiceService.swift` with speech recognition | `ios-sdk/frontend/AVRT_iOS/Services/VoiceService.swift` |

---

## 3. Dependent Claims

### Claim 6: Configurable Pattern-Based Detection

**Claim Language:** The method of Claim 2, wherein the patterns used for scoring each dimension are stored in an external configuration file and are loadable at runtime.

| Element | Implementation | Source |
|---------|----------------|--------|
| External pattern storage | JSON policy file with categorized pattern arrays | `policy_store.json:27-95` |
| Runtime loading | `SPIELEngine._load_policy()` reads JSON at init | `spiel_engine.py:106-116` |
| Runtime reload | `SPIELEngine.reload_policy()` | `spiel_engine.py:336-339` |
| Default fallback | `_default_policy()` returns hardcoded defaults if file missing | `spiel_engine.py:118-148` |

### Claim 7: Domain-Specific Custom Rules

**Claim Language:** The method of Claim 6, further comprising custom rules that trigger domain-specific warnings for medical, financial, and legal content.

| Rule | Trigger Patterns | Action | Source |
|------|-----------------|--------|--------|
| Medical advice | "take medicine", "stop medication", "diagnosis" | `warn` | `policy_store.json:120-126` |
| Financial advice | "invest in", "guaranteed returns", "financial advice" | `warn` | `policy_store.json:128-134` |
| Legal advice | "legal advice", "sue", "lawsuit", "attorney" | `warn` | `policy_store.json:136-141` |

### Claim 8: Cryptographic Audit Trail

**Claim Language:** The method of Claim 1, further comprising generating a SHA-256 hash of each validation entry for chain-of-custody integrity verification.

| Element | Implementation | Source |
|---------|----------------|--------|
| SHA-256 hashing | `HashService` in both Python and Swift | `hash_service.py`, `HashService.swift` |
| Audit entry creation | `AVRTFirewall._add_audit_entry()` with UUID-tagged entries | `middleware.py:609-632` |
| Chain verification | Hash chain verification in backend service | `hash_service.py` |
| Blockchain timestamping | Optional OriginStamp integration | `AVRTConfig.blockchain_timestamping` |

### Claim 9: Composite Score Calculation

**Claim Language:** The method of Claim 2, wherein the composite score is calculated as the arithmetic mean of all five dimension scores, and a passing determination requires Safety, Integrity, Ethics, and Composite all meeting their respective thresholds.

| Element | Implementation | Source |
|---------|----------------|--------|
| Arithmetic mean | `composite = (S + P + I + E + L) / 5.0` | `spiel_engine.py:181-187` |
| Passing check | `SPIELScore.is_passing()` checks Safety, Integrity, Ethics, Composite | `middleware.py:103-110` |
| Configurable thresholds | `policy_store.json:thresholds` object | `policy_store.json:11-18` |

### Claim 10: Rate-Limited Validation Pipeline

**Claim Language:** The method of Claim 1, further comprising rate limiting of validation requests to prevent abuse.

| Element | Implementation | Source |
|---------|----------------|--------|
| Per-minute limit | 100 requests/minute | `policy_store.json:113` |
| Per-hour limit | 5000 requests/hour | `policy_store.json:114` |
| Burst limit | 20 concurrent | `policy_store.json:115` |

---

## 4. Claim-to-Code Traceability Matrix

| Claim | Primary Class | Primary Method | Config Source |
|-------|--------------|----------------|---------------|
| 1 | `AVRTFirewall` | `validate()` | `AVRTConfig` |
| 2 | `SPIELEngine` | `enforce()` | `policy_store.json:thresholds` |
| 3 | `THTValidator` / `THTService` | `validate()` | `policy_store.json:tht_settings` |
| 4 | `SPIELEngine` | `enforce()` (exception handler) | `policy_store.json:fail_closed` |
| 5 | `VoiceFirewall` | `start_monitoring()` | `AVRTConfig.voice_language` |
| 6 | `SPIELEngine` | `_load_policy()` | `policy_store.json` |
| 7 | `SPIELEngine` | Policy custom_rules | `policy_store.json:custom_rules` |
| 8 | `HashService` | hash / verify | `AVRTConfig.blockchain_timestamping` |
| 9 | `SPIELScore` | `is_passing()` | `policy_store.json:thresholds` |
| 10 | (Policy-defined) | Rate limit config | `policy_store.json:rate_limits` |

---

## 5. Prior Art Differentiation

| Feature | AVRT Implementation | Typical Content Filters |
|---------|--------------------|-----------------------|
| Evaluation position | Post-generation middleware (provider-agnostic) | Embedded in provider |
| Scoring dimensionality | Five independent dimensions with configurable thresholds | Binary safe/unsafe |
| Protocol layering | SPIEL + THT dual-protocol stack | Single-pass filter |
| Fail-closed default | Blocks on any evaluation error | Typically fail-open |
| Audit chain | SHA-256 hashed entries with optional blockchain timestamping | Log files only |
| Voice-first design | Primary input modality with dedicated monitoring | Text-only or secondary |
| Pattern configurability | External JSON policy file, runtime-reloadable | Hardcoded or model-internal |

---

## 6. Revision History

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| 1.0.0 | 2025-01-31 | J. Proper | Initial claim chart |
